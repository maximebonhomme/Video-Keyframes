var VideoLabel=function($video){this.video=$video[0],this.duration=0,this.currentTime=0,this.isPlaying=!1,this.labels=[],this.interval=0,this.speed=50,this.settings={name:null,pause:!1},$video.on("canplay",this.init.bind(this)),$video.on("playing",this.playing.bind(this)),$video.on("pause",this.paused.bind(this)),$video.on("ended",this.paused.bind(this))};VideoLabel.prototype={init:function(){this.duration=this.video.duration,this.interval=setInterval(this.update.bind(this),this.speed)},addLabel:function(time,callback,options){var opts=$.extend({},this.settings,options),label={time:time,callback:callback,options:opts};void 0!==time&&void 0!==callback&&this.labels.push(label)},getLabel:function(id){var type=typeof id;if("number"===type)return void 0===this.labels[id]?void console.log("getLabel() - no label found for id "+id):this.labels[id];if("string"===type){var label=$.grep(this.labels,function(e){return e.options.name==id});return label.length?label[0]:void console.log("getLabel() - no label found for id "+id)}return void console.log("getLabel() - int or string only")},playFrom:function(id){var type=typeof id;if("number"===type){if(void 0===this.labels[id])return void console.log("playFrom() - no label found for id "+id);console.log(this.labels[id]),this.currentTime=this.labels[id].time}else{if("string"!==type)return void console.log("playFrom() - int or string only");var label=$.grep(this.labels,function(e){return e.options.name==id});if(void 0===label)return void console.log("playFrom() - no label found for id "+id);this.currentTime=label[0].time}this.video.play()},seekLabels:function(){var _this=this;$.each(this.labels,function(){var time=this.time,callback=this.callback,options=this.options;time===_this.currentTime&&(options.pause&&_this.video.pause(),callback())})},playing:function(){this.isPlaying=!0,this.interval=setInterval(this.update.bind(this),this.speed)},paused:function(){this.isPlaying=!1},update:function(){this.isPlaying?(this.currentTime=parseFloat(this.video.currentTime.toFixed(1)),this.seekLabels()):(clearInterval(this.interval),this.interval=0)}};